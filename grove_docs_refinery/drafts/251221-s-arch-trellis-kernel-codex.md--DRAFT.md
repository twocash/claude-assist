## Rewrite: 251221-s-arch-trellis-kernel-codex.md
### Diagnosis Summary
This is a solid architectural specification that captures Grove's core DEX philosophy well. The document is fairly current in terminology and positioning, though it needs alignment with checkpoint language and voice standards. The technical content is sound and the DEX separation principle is clearly articulated.

### Key Changes Made
- Updated terminology mapping (removed "meta-framework," strengthened "exploration architecture")
- Aligned voice with Grove standards (removed throat-clearing, activated passive constructions)
- Refined strategic positioning to match checkpoint framing
- Preserved all technical specifications and architectural principles
- Maintained document structure and technical depth
- Updated conclusion to reflect current Grove positioning

### Flags for Review
- Technical schemas and implementation details preserved as-is (appear accurate to current architecture)
- DEX principles maintained without modification (core to the specification)
- No substantive architectural claims altered, only voice and positioning refined

---
# Trellis Architecture Kernel Codex

# **Domain-Agnostic Information Refinement Engine**

*The Standard for Human-Guided Intelligence Augmentation*

December 21, 2025 | Architectural Specification v1.0

**Executive Summary**

The **Trellis Architecture** is a standard that makes any corpus of information navigable and refinable through human attention.

The core thesis: **Models are seeds, architecture is soil.**

Current AI investment focuses on building bigger models (better seeds). Trellis Architecture focuses on the environment that makes those models productive. It provides the **DEX (Declarative Exploration)** layer—the structural support that allows organic intelligence (human and artificial) to climb, branch, and bear fruit without collapsing into chaos.

### The DEX Directive

The architecture implements one First Order Directive: **Separation of Exploration Logic from Execution Capability.**

- **Exploration Logic (The Trellis):** Defined declaratively (JSON/YAML). Owned by domain experts. Sets the growing conditions.
- **Execution Capability (The Vine):** Performed by AI models and humans. Interchangeable and ephemeral.

*Exploration architecture is to the age of AI what information architecture was to the internet. Information architecture made the chaotic early web navigable. Exploration architecture makes AI capability productive.*

## **2. The Three-Layer Abstraction**

The Trellis separates concerns into three distinct layers, creating the standard **DEX Stack**:

### **Layer 1: The Engine (The Trellis Frame)**

*Status: Fixed Infrastructure | Change Velocity: Low*

The engine layer implements the invariant physics of the system. It processes any content type without knowing domain specifics.

- **Superposition Collapse:** Human attention transforms probabilistic AI outputs into validated insights.
- **Sprout/Card Mechanics:** Atomic units of insight capture.
- **Attribution Chains:** Provenance tracking that links every insight back to its source.
- **Memory Persistence:** Accumulated context that turns isolated sessions into persistent knowledge growth.

### **Layer 2: The Corpus (The Substrate)**

*Status: Variable Input | Change Velocity: Medium*

The corpus layer contains raw information. Trellis Architecture works with any substrate:

| **Corpus Type** | **Content** | **Value Proposition** |
| --- | --- | --- |
| **Grove Research** | White papers, specs | Coherent project architecture |
| **Legal Discovery** | Depositions, exhibits | Case theory development |
| **Academic Literature** | Papers, preprints | Synthesis & gap identification |
| **Enterprise Knowledge** | Slack, Docs, Email | Tribal knowledge preservation |

### **Layer 3: The Configuration (The Conditions)**

*Status: Declarative (DEX) | Change Velocity: High*

The **DEX Layer** defines growing conditions. A legal analyst defines "Contradiction" nutrients; a biologist defines "Replication Error" nutrients.

- **Configuration is Declarative:** Non-developers define behavior through structured data files.
- **Logic Isolation:** Changing domains doesn't require touching engine code.

## **3. The DEX Configuration Schemas**

Four interconnected schemas shape the Trellis—the genetic code of each deployment.

### **A. Annotation Schema**

Defines insight types that can be harvested.

| **Field** | **Description** |
| --- | --- |
| annotationTypes[] | Valid categories (e.g., "Strategic Insight", "Legal Privilege") |
| validationRules{} | Logic defining valid annotations |
| displayTemplates{} | UI rendering instructions |
- **Example (Legal):** "Contradicts Testimony" (Requires citation + timestamp)
- **Example (Science):** "Methodology Gap" (Requires reference to control group)

### **B. Relationship Schema**

Defines how nodes connect.

| **Field** | **Description** |
| --- | --- |
| relationTypes[] | "Supports", "Refutes", "Extends", "Causes" |
| directionality{} | Directed vs. Bi-directional graph edges |
| autoDetection{} | Prompts for AI to suggest connections |

### **C. Processing Flow Schema**

Defines the insight lifecycle.

| **Field** | **Description** |
| --- | --- |
| stages[] | Sprout → Sapling → Tree → Grove |
| transitions{} | Rules for moving between stages (e.g., "Requires 2 Approvals") |
| outputIntegration{} | Where insights flow (Knowledge Commons, Case File) |

### **D. Display Schema**

Defines how the Trellis appears to the Observer.

| **Field** | **Description** |
| --- | --- |
| cardTemplates{} | Visual layouts for content types |
| densityLevels{} | Information density (Compact vs. Detailed) |
| visualizations[] | Graph view, Timeline view, List view |

## **4. Architectural Principles (The DEX Standard)**

Any contribution to the codebase must adhere to these First Order Directives.

### **Principle 1: Capability Agnosticism (The Vine is not the Trellis)**

The architecture never assumes specific AI capabilities. Today's frontier model is tomorrow's local script.

- *The Test:* If the model hallucinates, the Trellis contains it without breaking. Structure provides validity, not the model.

### **Principle 2: Declarative Sovereignty**

Domain expertise belongs in configuration, not code.

- *The Directive:* Never hard-code exploration paths. Build the engine that reads the map; don't build the map into the engine.

### **Principle 3: Provenance as Infrastructure**

In the Trellis, a fact without a root is a weed.

- *The Mechanism:* Attribution chains are mandatory. We track who collapsed the superposition and when.

### **Principle 4: Human-AI Symbiosis (The Observer)**

The system requires human-in-the-loop for Superposition Collapse.

- *The Role:* AI generates possibilities (growth); humans apply judgment (pruning). The Trellis supports both.

## **5. Implementation Roadmap**

### **Phase 1: Reference Implementation (The Grove Terminal)**

Current State

Grove Terminal serves as the reference Trellis implementation, demonstrating DEX mechanics using distributed AI research corpus.

- Validates Sprout/Card lifecycle.
- Proves Superposition Collapse UX.

### **Phase 2: Configuration Extraction (DEXification)**

Extract hardcoded behaviors into DEX Schemas.

- Convert types.ts definitions into schema.json files.
- Implement dynamic SchemaLoader.

### **Phase 3: The Trellis Builder (Admin UI)**

Enable non-technical experts to build their own Trellises.

- Visual editor for Annotation and Relationship schemas.
- No-code adjustment of processing flows.

### **Phase 4: Multi-Domain Deployment**

Deploy Trellis into new domains.

- **Legal Trellis:** Pilot with partner law firm.
- **Academic Trellis:** Pilot with university research group.
- **Enterprise Trellis:** Pilot with corporate partner.

## **6. Conclusion: Infrastructure for Discovery**

Grove implements the Trellis Architecture, but we're building more than an application. We're building the **protocol for productive connections between knowledge and human intelligence**.

Information architecture organized the static web. **Exploration architecture** organizes knowledge in the age of AI. By separating exploration logic from execution capability, we ensure that as models improve, our Trellis simply bears better fruit.

The insight: exploration processes generate value independent of component capabilities. Guided discovery and serendipity drive breakthroughs even when individual model scores are modest. Grove bets on architecture, not parameter count.

**Build the Trellis. The community brings the seeds.**