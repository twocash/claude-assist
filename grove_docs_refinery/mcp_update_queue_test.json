[
  {
    "notion_id": "2ee780a78eef816b8f91fe1014800b50",
    "filename": "260100-s-arch-bedrock-information-architecture.md--FINAL.md",
    "tables_count": 12,
    "converted_content": "\n# Bedrock Information Architecture\n\n**Version:** 1.0\n**Date:** January 2026\n**Status:** Canonical Reference\n\n---\n\n## Purpose\n\nThis document defines the information architecture for the Bedrock workspaceâ€”the knowledge curation layer of Grove's exploration infrastructure. It establishes the conceptual model, navigation structure, and design primitives that govern how humans interact with knowledge lifecycle management.\n\nThe goal is **self-evident software**: interfaces so aligned with natural mental models that they require no manual.\n\n---\n\n## The Grove Metaphor\n\nGrove's entire architecture builds on a horticultural metaphor that maps directly to knowledge work:\n\n<table header-row=\"true\">\n\t<tr>\n\t\t<td>Metaphor</td>\n\t\t<td>System Concept</td>\n\t\t<td>What It Means</td>\n\t</tr>\n\t<tr>\n\t\t<td>**Grove**</td>\n\t\t<td>The exploration infrastructure</td>\n\t\t<td>A living system where knowledge grows</td>\n\t</tr>\n\t<tr>\n\t\t<td>**Trellis**</td>\n\t\t<td>The architecture standard</td>\n\t\t<td>Structure that enables growth without constraining it</td>\n\t</tr>\n\t<tr>\n\t\t<td>**Sprout**</td>\n\t\t<td>Atomic research unit</td>\n\t\t<td>A planted question that grows into understanding</td>\n\t</tr>\n\t<tr>\n\t\t<td>**Nursery**</td>\n\t\t<td>Immature knowledge space</td>\n\t\t<td>Where sprouts are cultivated before maturity</td>\n\t</tr>\n\t<tr>\n\t\t<td>**Garden**</td>\n\t\t<td>Mature knowledge corpus</td>\n\t\t<td>Validated knowledge that feeds exploration</td>\n\t</tr>\n\t<tr>\n\t\t<td>**Lens**</td>\n\t\t<td>Perspective</td>\n\t\t<td>A way of seeing that shapes what's noticed</td>\n\t</tr>\n\t<tr>\n\t\t<td>**Experience**</td>\n\t\t<td>Configured delivery</td>\n\t\t<td>How exploration feels to the Observer</td>\n\t</tr>\n</table>\n\nThis metaphor is not decorationâ€”it is **architecture**. Every interface decision tests against it: *\"Would a gardener understand this?\"*\n\n---\n\n## The Knowledge Lifecycle\n\nKnowledge in Grove follows a natural lifecycle from intent to integration:\n\n```\n    SPARK                    SPROUT                   GROWING\n      â”‚                        â”‚                         â”‚\n      â”‚  \"I want to           â”‚  Planted in            â”‚  Research agents\n      â”‚   understand X\"        â”‚  the system            â”‚  cultivating\n      â”‚                        â”‚                         â”‚\n      â–¼                        â–¼                         â–¼\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚  Intent  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚  Nursery â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚  Nursery â”‚\nâ”‚ declared â”‚            â”‚ (planted)â”‚              â”‚ (growing)â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                                                        â”‚\n                                                        â–¼\n                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n                        â”‚  Garden  â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚  Review  â”‚\n                        â”‚ (mature) â”‚   accepted   â”‚  (ready) â”‚\n                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                              â”‚\n                              â–¼\n                    Feeds agent responses\n                    in /explore\n```\n\n### Lifecycle States\n\n<table header-row=\"true\">\n\t<tr>\n\t\t<td>State</td>\n\t\t<td>Location</td>\n\t\t<td>Description</td>\n\t\t<td>Observer Experience</td>\n\t</tr>\n\t<tr>\n\t\t<td>**Planted**</td>\n\t\t<td>Nursery</td>\n\t\t<td>Sprout created, queued for research</td>\n\t\t<td>\"I asked a question\"</td>\n\t</tr>\n\t<tr>\n\t\t<td>**Growing**</td>\n\t\t<td>Nursery</td>\n\t\t<td>Agents actively researching</td>\n\t\t<td>\"Research in progress\"</td>\n\t</tr>\n\t<tr>\n\t\t<td>**Ready**</td>\n\t\t<td>Nursery</td>\n\t\t<td>Research complete, awaiting review</td>\n\t\t<td>\"Ready for me to review\"</td>\n\t</tr>\n\t<tr>\n\t\t<td>**Mature**</td>\n\t\t<td>Garden</td>\n\t\t<td>Accepted into corpus</td>\n\t\t<td>\"Part of the knowledge base\"</td>\n\t</tr>\n\t<tr>\n\t\t<td>**Archived**</td>\n\t\t<td>Garden (archived)</td>\n\t\t<td>Deprecated but preserved</td>\n\t\t<td>\"Historical reference\"</td>\n\t</tr>\n</table>\n\n### The Maturity Test\n\n> **A sprout graduates to the Garden when it can feed exploration.**\n\nThis single criterion determines placement: Can this knowledge enhance agent responses? If yes, it belongs in the Garden. If not yet, it remains in the Nursery.\n\n---\n\n## The Visibility Model\n\nAccess to Bedrock features follows progressive disclosure based on role:\n\n```\n                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n                    â”‚              EXPERIENCE                 â”‚\n                    â”‚        (configured delivery)            â”‚\n                    â”‚                                         â”‚\n                    â”‚  System prompt Â· Thesis Â· Architect     â”‚\n                    â”‚  config Â· Quality gates                 â”‚\n                    â”‚                                         â”‚\n                    â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚\n                    â”‚            â”‚  Admin  â”‚                  â”‚\n                    â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚\n                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                                      â”‚\n                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n                    â”‚         LENSES  Â·  PROMPTS              â”‚\n                    â”‚        (cultivation tools)              â”‚\n                    â”‚                                         â”‚\n                    â”‚  Perspectives Â· Templates Â· Patterns    â”‚\n                    â”‚                                         â”‚\n                    â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚\n                    â”‚         â”‚  Cultivator  â”‚                â”‚\n                    â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚\n                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                                      â”‚\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚                NURSERY  Â·  GARDEN                           â”‚\nâ”‚              (knowledge lifecycle)                          â”‚\nâ”‚                                                             â”‚\nâ”‚  Sprouts in progress Â· Mature corpus Â· Research status      â”‚\nâ”‚                                                             â”‚\nâ”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                             â”‚\nâ”‚                    â”‚ Everyone â”‚                             â”‚\nâ”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                             â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n```\n\n### Role Definitions\n\n<table header-row=\"true\">\n\t<tr>\n\t\t<td>Role</td>\n\t\t<td>Can See</td>\n\t\t<td>Can Do</td>\n\t</tr>\n\t<tr>\n\t\t<td>**Explorer**</td>\n\t\t<td>Nursery, Garden</td>\n\t\t<td>Plant sprouts, review results, explore corpus</td>\n\t</tr>\n\t<tr>\n\t\t<td>**Cultivator**</td>\n\t\t<td>+ Lenses, Prompts</td>\n\t\t<td>Configure perspectives, create templates</td>\n\t</tr>\n\t<tr>\n\t\t<td>**Admin**</td>\n\t\t<td>+ Experience</td>\n\t\t<td>Configure system prompt, thesis, architect settings</td>\n\t</tr>\n</table>\n\n### The Progressive Disclosure Principle\n\n> **Show less, reveal more.**\n\nObservers see only what they can act on. Complexity emerges with capability, not by default. An explorer never seesâ€”or faces confusion fromâ€”admin controls.\n\n---\n\n## The Navigation Structure\n\n### Bedrock Workspace Navigation\n\n```\n/bedrock\nâ”‚\nâ”œâ”€â”€ Dashboard                    â† Overview & health\nâ”‚   â””â”€â”€ Activity feed, system status, quick actions\nâ”‚\nâ”œâ”€â”€ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  (Knowledge Lifecycle)\nâ”‚\nâ”œâ”€â”€ Nursery                      â† Sprouts in cultivation\nâ”‚   â””â”€â”€ Planted, growing, ready for review\nâ”‚   â””â”€â”€ Filter by status, age, research type\nâ”‚   â””â”€â”€ Actions: review, promote to Garden, archive\nâ”‚\nâ”œâ”€â”€ Garden                       â† Mature corpus\nâ”‚   â””â”€â”€ RAG vectors + graduated sprout outputs\nâ”‚   â””â”€â”€ Search, browse, inspect provenance\nâ”‚   â””â”€â”€ Actions: archive, view usage, trace lineage\nâ”‚\nâ”œâ”€â”€ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  (Cultivation Tools)\nâ”‚\nâ”œâ”€â”€ Lenses                       â† Perspectives\nâ”‚   â””â”€â”€ Persona configurations\nâ”‚   â””â”€â”€ How agents \"see\" on behalf of Observers\nâ”‚\nâ”œâ”€â”€ Prompts                      â† Templates\nâ”‚   â””â”€â”€ Interaction patterns\nâ”‚   â””â”€â”€ Starting points for exploration\nâ”‚\nâ”œâ”€â”€ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  (Delivery Configuration)\nâ”‚\nâ””â”€â”€ Experience                   â† THE experience\n    â””â”€â”€ System prompt (identity, voice, structure)\n    â””â”€â”€ Thesis (what this grove investigates)\n    â””â”€â”€ Sprout Architect config (inference, quality gates)\n    â””â”€â”€ Singleton: one active configuration, versioned\n```\n\n### Navigation Groupings\n\n<table header-row=\"true\">\n\t<tr>\n\t\t<td>Group</td>\n\t\t<td>Purpose</td>\n\t\t<td>Contains</td>\n\t</tr>\n\t<tr>\n\t\t<td>**Knowledge Lifecycle**</td>\n\t\t<td>Where things are by maturity</td>\n\t\t<td>Nursery, Garden</td>\n\t</tr>\n\t<tr>\n\t\t<td>**Cultivation Tools**</td>\n\t\t<td>How you shape knowledge</td>\n\t\t<td>Lenses, Prompts</td>\n\t</tr>\n\t<tr>\n\t\t<td>**Delivery Configuration**</td>\n\t\t<td>What gets experienced</td>\n\t\t<td>Experience</td>\n\t</tr>\n</table>\n\n### URL Structure\n\n```\n/bedrock                    â†’ Dashboard\n/bedrock/nursery            â†’ Sprouts in cultivation\n/bedrock/garden             â†’ Mature corpus\n/bedrock/lenses             â†’ Lens management\n/bedrock/prompts            â†’ Prompt templates\n/bedrock/experience         â†’ Experience configuration\n```\n\n---\n\n## The /explore Inspector\n\nWhen exploring in `/explore`, Observers see their research activity via an inspector panel:\n\n### The Nursery Badge\n\nA persistent indicator showing active research:\n\n```\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚  ğŸŒ± 3                           â”‚  â† Badge: 3 sprouts growing\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚  Expanded view:                 â”‚\nâ”‚                                 â”‚\nâ”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚\nâ”‚  â”‚ ğŸŒ± Witness timeline...    â”‚  â”‚  â† Growing\nâ”‚  â”‚    â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 45%         â”‚  â”‚\nâ”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚\nâ”‚  â”‚ âœ“ Email chain analysis    â”‚  â”‚  â† Ready for review\nâ”‚  â”‚    Ready Â· Tap to review  â”‚  â”‚\nâ”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚\nâ”‚  â”‚ ğŸŒ± Deposition conflicts   â”‚  â”‚  â† Growing\nâ”‚  â”‚    â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 72%       â”‚  â”‚\nâ”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚\nâ”‚                                 â”‚\nâ”‚  View all in Nursery â†’          â”‚  â† Deep link to /bedrock/nursery\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n```\n\n### Scope Distinction\n\n<table header-row=\"true\">\n\t<tr>\n\t\t<td>Context</td>\n\t\t<td>What's Shown</td>\n\t\t<td>Scope</td>\n\t</tr>\n\t<tr>\n\t\t<td>/explore inspector</td>\n\t\t<td>My Nursery</td>\n\t\t<td>Session or user-scoped</td>\n\t</tr>\n\t<tr>\n\t\t<td>/bedrock/nursery</td>\n\t\t<td>The Nursery</td>\n\t\t<td>Grove-scoped (all sprouts)</td>\n\t</tr>\n</table>\n\nSame concept, different scope. The metaphor holds at both levels.\n\n---\n\n## Design Primitives\n\nThese patterns repeat throughout Grove's architecture:\n\n### 1. Lifecycle State\n\nThings move through defined states toward maturity.\n\n```\nImmature â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ Mature\n   â”‚                                â”‚\n   â”‚  (cultivation, review,         â”‚\n   â”‚   validation)                  â”‚\n   â”‚                                â”‚\n   â–¼                                â–¼\nNursery                          Garden\nDraft                            Active\nPending                          Published\n```\n\n**Application:** Sprouts, system prompts, lensesâ€”all follow this pattern.\n\n### 2. Singleton vs Instance\n\nSome things are unique per grove; others are collections.\n\n<table header-row=\"true\">\n\t<tr>\n\t\t<td>Pattern</td>\n\t\t<td>Cardinality</td>\n\t\t<td>Examples</td>\n\t</tr>\n\t<tr>\n\t\t<td>**Singleton**</td>\n\t\t<td>One active per grove</td>\n\t\t<td>Experience (system prompt), Grove Settings</td>\n\t</tr>\n\t<tr>\n\t\t<td>**Instance**</td>\n\t\t<td>Many per grove</td>\n\t\t<td>Sprouts, Lenses, Prompts, Journeys</td>\n\t</tr>\n</table>\n\n**Singleton Rules:**\n- One active at a time\n- Multiple versions exist (history)\n- Activating new version archives previous\n- Global `is_active` flag\n\n**Instance Rules:**\n- Many can be active simultaneously\n- Each instance can have versions\n- `is_active` scoped to instance, not global\n\n### 3. Progressive Disclosure\n\nComplexity reveals with capability.\n\n```\nConsumer â”€â”€â”€â”€â”€â”€â–¶ Cultivator â”€â”€â”€â”€â”€â”€â–¶ Architect\n    â”‚                â”‚                  â”‚\n    â”‚  (sees less)   â”‚  (sees more)     â”‚  (sees all)\n    â”‚                â”‚                  â”‚\n    â–¼                â–¼                  â–¼\nExplore          + Shape            + Configure\n```\n\n**Application:** Navigation items, feature visibility, action availability.\n\n### 4. Spatial Logic\n\nThings have a *place* based on their nature.\n\n<table header-row=\"true\">\n\t<tr>\n\t\t<td>Nature</td>\n\t\t<td>Place</td>\n\t\t<td>Examples</td>\n\t</tr>\n\t<tr>\n\t\t<td>**States**</td>\n\t\t<td>Lifecycle locations</td>\n\t\t<td>Nursery, Garden</td>\n\t</tr>\n\t<tr>\n\t\t<td>**Tools**</td>\n\t\t<td>Workbenches</td>\n\t\t<td>Lenses, Prompts</td>\n\t</tr>\n\t<tr>\n\t\t<td>**Configuration**</td>\n\t\t<td>Control rooms</td>\n\t\t<td>Experience</td>\n\t</tr>\n</table>\n\nUsers navigate *to* places, not *through* menus.\n\n### 5. Provenance as Infrastructure\n\nEverything tracks its origin.\n\n```typescript\ninterface Provenance {\n  createdBy: Actor;          // Who/what created this\n  createdAt: Timestamp;      // When\n  createdFrom?: Reference;   // What it came from\n  createdWith?: Context;     // What lens/journey/state\n}\n```\n\n**The Rule:** A fact without a root is a weed.\n\n---\n\n## The Experience Singleton\n\nThe **Experience** console configures THE experience of exploration. It is singularâ€”one active configuration per grove.\n\n### What Experience Contains\n\n<table header-row=\"true\">\n\t<tr>\n\t\t<td>Component</td>\n\t\t<td>Purpose</td>\n\t\t<td>Versioned?</td>\n\t</tr>\n\t<tr>\n\t\t<td>**System Prompt**</td>\n\t\t<td>Identity, voice, structure, knowledge, boundaries</td>\n\t\t<td>Yes</td>\n\t</tr>\n\t<tr>\n\t\t<td>**Thesis**</td>\n\t\t<td>What this grove investigates</td>\n\t\t<td>Yes</td>\n\t</tr>\n\t<tr>\n\t\t<td>**Sprout Architect Config**</td>\n\t\t<td>Inference rules, quality gates, spawn limits</td>\n\t\t<td>Yes</td>\n\t</tr>\n\t<tr>\n\t\t<td>**Response Behaviors**</td>\n\t\t<td>Mode (architect/librarian/contemplative), closing style</td>\n\t\t<td>Yes</td>\n\t</tr>\n</table>\n\n### Experience vs Experiences\n\n<table header-row=\"true\">\n\t<tr>\n\t\t<td>Concept</td>\n\t\t<td>Meaning</td>\n\t</tr>\n\t<tr>\n\t\t<td>**Experience** (singular)</td>\n\t\t<td>THE configured delivery of exploration</td>\n\t</tr>\n\t<tr>\n\t\t<td>~~Experiences~~ (plural)</td>\n\t\t<td>âŒ Incorrectâ€”implies multiple active configs</td>\n\t</tr>\n</table>\n\nThere is one experience. It can be versioned. Only one version is active.\n\n### Version Management\n\n```\nExperience\nâ”œâ”€â”€ v1 (archived)\nâ”œâ”€â”€ v2 (archived)\nâ”œâ”€â”€ v3 (ACTIVE) â† Current experience\nâ””â”€â”€ v4 (draft)  â† Work in progress\n```\n\nActivating v4 archives v3. Only one active at a time.\n\n---\n\n## Metaphor Glossary\n\nFor consistency across all Grove interfaces and documentation:\n\n<table header-row=\"true\">\n\t<tr>\n\t\t<td>Term</td>\n\t\t<td>Definition</td>\n\t\t<td>Anti-pattern</td>\n\t</tr>\n\t<tr>\n\t\t<td>**Grove**</td>\n\t\t<td>The exploration infrastructure; a tenant/organization's space</td>\n\t\t<td>\"Workspace,\" \"Account\"</td>\n\t</tr>\n\t<tr>\n\t\t<td>**Trellis**</td>\n\t\t<td>The architectural standard Grove implements</td>\n\t\t<td>\"Framework,\" \"Platform\"</td>\n\t</tr>\n\t<tr>\n\t\t<td>**Sprout**</td>\n\t\t<td>An atomic unit of research intent</td>\n\t\t<td>\"Query,\" \"Request,\" \"Task\"</td>\n\t</tr>\n\t<tr>\n\t\t<td>**Nursery**</td>\n\t\t<td>Where immature sprouts are cultivated</td>\n\t\t<td>\"Queue,\" \"Pipeline,\" \"Inbox\"</td>\n\t</tr>\n\t<tr>\n\t\t<td>**Garden**</td>\n\t\t<td>The mature knowledge corpus</td>\n\t\t<td>\"Database,\" \"Repository,\" \"Store\"</td>\n\t</tr>\n\t<tr>\n\t\t<td>**Lens**</td>\n\t\t<td>A configured perspective</td>\n\t\t<td>\"Persona,\" \"Role,\" \"Mode\"</td>\n\t</tr>\n\t<tr>\n\t\t<td>**Experience**</td>\n\t\t<td>The configured delivery of exploration</td>\n\t\t<td>\"Settings,\" \"Configuration\"</td>\n\t</tr>\n\t<tr>\n\t\t<td>**Cultivator**</td>\n\t\t<td>A user who shapes knowledge</td>\n\t\t<td>\"Editor,\" \"Curator\"</td>\n\t</tr>\n\t<tr>\n\t\t<td>**Spark**</td>\n\t\t<td>The initial intent before it becomes a sprout</td>\n\t\t<td>\"Input,\" \"Prompt\"</td>\n\t</tr>\n\t<tr>\n\t\t<td>**Harvest**</td>\n\t\t<td>The act of reviewing/accepting research</td>\n\t\t<td>\"Review,\" \"Approval\"</td>\n\t</tr>\n</table>\n\n### Usage Examples\n\n**Correct:**\n- \"Your sprout is growing in the nursery\"\n- \"This insight has matured to the garden\"\n- \"Configure the experience for this grove\"\n\n**Incorrect:**\n- \"Your query is in the processing queue\"\n- \"This data has been added to the database\"\n- \"Update the settings for this workspace\"\n\n---\n\n## Migration from Current State\n\nThe current Bedrock implementation uses different terminology:\n\n<table header-row=\"true\">\n\t<tr>\n\t\t<td>Current</td>\n\t\t<td>Proposed</td>\n\t\t<td>Migration Notes</td>\n\t</tr>\n\t<tr>\n\t\t<td>Pipeline</td>\n\t\t<td>**Garden**</td>\n\t\t<td>Rename route, update nav, preserve functionality</td>\n\t</tr>\n\t<tr>\n\t\t<td>Garden (sprouts)</td>\n\t\t<td>**Nursery**</td>\n\t\t<td>Rename route, update nav, reframe purpose</td>\n\t</tr>\n\t<tr>\n\t\t<td>Experiences (plural)</td>\n\t\t<td>**Experience** (singular)</td>\n\t\t<td>Rename route, update nav, enforce singleton</td>\n\t</tr>\n\t<tr>\n\t\t<td>Dashboard</td>\n\t\t<td>Dashboard</td>\n\t\t<td>Keep as-is</td>\n\t</tr>\n\t<tr>\n\t\t<td>Lenses</td>\n\t\t<td>Lenses</td>\n\t\t<td>Keep as-is</td>\n\t</tr>\n\t<tr>\n\t\t<td>Prompts</td>\n\t\t<td>Prompts</td>\n\t\t<td>Keep as-is</td>\n\t</tr>\n</table>\n\n### Route Changes\n\n```\nCurrent                    Proposed\nâ”€â”€â”€â”€â”€â”€â”€                    â”€â”€â”€â”€â”€â”€â”€â”€\n/bedrock/pipeline    â†’     /bedrock/garden\n/bedrock/garden      â†’     /bedrock/nursery\n/bedrock/experiences â†’     /bedrock/experience\n```\n\n### Component Renames\n\n```\nCurrent                    Proposed\nâ”€â”€â”€â”€â”€â”€â”€                    â”€â”€â”€â”€â”€â”€â”€â”€\nPipelineMonitor.tsx  â†’     GardenConsole.tsx\nGardenConsole.tsx    â†’     NurseryConsole.tsx\nExperiencesConsole/  â†’     ExperienceConsole/\n```\n\n---\n\n## Validation Checklist\n\nBefore implementing any Bedrock interface, verify:\n\n- [ ] **Metaphor coherence:** Would a gardener understand this term?\n- [ ] **Lifecycle clarity:** Is the maturity state obvious?\n- [ ] **Role appropriateness:** Does visibility match capability?\n- [ ] **Singleton/Instance correctness:** Is cardinality correct?\n- [ ] **Spatial logic:** Is this a place, tool, or configuration?\n- [ ] **Provenance present:** Can users trace origins?\n- [ ] **Progressive disclosure:** Is complexity earned, not imposed?\n\n---\n\n## The Art\n\nWhat makes this architecture elegant:\n\n1. **Metaphor coherence** â€” Every term reinforces the same mental model\n2. **Self-evidence** â€” Interfaces explain themselves through naming\n3. **Natural hierarchy** â€” Lifecycle â†’ Tools â†’ Configuration feels inevitable\n4. **Scalable simplicity** â€” The same patterns work at every level\n5. **Human-centered language** â€” No jargon, no tech-speak, no acronyms\n\n> *The best interface is one that disappears. Observers should feel like they're tending a garden, not operating software.*\n\n---\n\n## Provenance\n\n<table header-row=\"true\">\n\t<tr>\n\t\t<td>Field</td>\n\t\t<td>Value</td>\n\t</tr>\n\t<tr>\n\t\t<td>**Author**</td>\n\t\t<td>Jim Calhoun / Claude</td>\n\t</tr>\n\t<tr>\n\t\t<td>**Created**</td>\n\t\t<td>2026-01-10</td>\n\t</tr>\n\t<tr>\n\t\t<td>**Context**</td>\n\t\t<td>Bedrock IA refinement session</td>\n\t</tr>\n\t<tr>\n\t\t<td>**Methodology**</td>\n\t\t<td>Collaborative design dialogue</td>\n\t</tr>\n\t<tr>\n\t\t<td>**Status**</td>\n\t\t<td>Canonical reference for Bedrock development</td>\n\t</tr>\n</table>\n\n---\n\n*This document is the source of truth for Bedrock information architecture. All implementation should reference it. Updates require explicit versioning.*"
  },
  {
    "notion_id": "2ee780a78eef8128b8adef7764ebbcf1",
    "filename": "251224-s-pattern-console-extraction-vs-rewrite.md--FINAL.md",
    "tables_count": 7,
    "converted_content": "\n# Foundation Console Deep Dive: Extraction vs Rewrite Analysis\n\n**Date:** December 24, 2024\n\n**Purpose:** Inform Foundation Sprint Spec for Kinetic Architecture migration\n\n**Status:** Analysis Complete â€” Ready for Sprint Planning\n\n---\n\n## Executive Summary\n\nThe current Foundation console architecture achieves **80% feature completeness** but lacks **architectural consistency**. NarrativeArchitect demonstrates the target three-panel inspector pattern successfully, while other consoles (KnowledgeVault, HealthDashboard, EngagementBridge) use different layouts. The path to Kinetic Architecture requires:\n\n1. **Extract** working patterns from NarrativeArchitect into reusable primitives\n2. **Unify** schema types under DEXObject base interface\n3. **Refactor** NarrativeArchitect to consume from DEXRegistry\n4. **Migrate** other consoles to unified pattern\n\n---\n\n## Current Architecture Analysis\n\n### Working Three-Panel Layout\n\n```\nFoundationWorkspace.tsx\nâ”œâ”€â”€ FoundationHeader (48px fixed)\nâ””â”€â”€ ThreeColumnLayout\n    â”œâ”€â”€ FoundationNav (220px) â€” Sidebar navigation\n    â”œâ”€â”€ <Outlet> â†’ Console content (flex-1)\n    â””â”€â”€ FoundationInspector (340px, conditional)\n```\n\n**What Works:**\n\n- `ThreeColumnLayout` renders three columns properly\n- `FoundationUIContext` manages inspector state globally\n- `FoundationInspector` routes to correct inspector by mode type\n- `JourneyInspector` and `NodeInspector` are fully implemented\n- Click â†’ openInspector() â†’ Panel opens pattern functions correctly\n\n---\n\n## Component Inventory\n\n### Shared Primitives (src/shared/)\n\n<table header-row=\"true\">\n\t<tr>\n\t\t<td>Component</td>\n\t\t<td>Lines</td>\n\t\t<td>Status</td>\n\t\t<td>Reusable</td>\n\t</tr>\n\t<tr>\n\t\t<td>`ThreeColumnLayout`</td>\n\t\t<td>68</td>\n\t\t<td>âœ… Working</td>\n\t\t<td>Yes â€” Core layout</td>\n\t</tr>\n\t<tr>\n\t\t<td>`InspectorPanel`</td>\n\t\t<td>99</td>\n\t\t<td>âœ… Working</td>\n\t\t<td>Yes â€” Inspector wrapper</td>\n\t</tr>\n\t<tr>\n\t\t<td>`InspectorSection`</td>\n\t\t<td>15</td>\n\t\t<td>âœ… Working</td>\n\t\t<td>Yes â€” Section primitive</td>\n\t</tr>\n\t<tr>\n\t\t<td>`InspectorDivider`</td>\n\t\t<td>3</td>\n\t\t<td>âœ… Working</td>\n\t\t<td>Yes â€” Divider</td>\n\t</tr>\n\t<tr>\n\t\t<td>`CollectionHeader`</td>\n\t\t<td>106</td>\n\t\t<td>âœ… Working</td>\n\t\t<td>Yes â€” Search/filter bar</td>\n\t</tr>\n\t<tr>\n\t\t<td>`SearchInput`</td>\n\t\t<td>~40</td>\n\t\t<td>âœ… Working</td>\n\t\t<td>Yes</td>\n\t</tr>\n\t<tr>\n\t\t<td>`FilterButton`</td>\n\t\t<td>~60</td>\n\t\t<td>âœ… Working</td>\n\t\t<td>Yes</td>\n\t</tr>\n\t<tr>\n\t\t<td>`SortButton`</td>\n\t\t<td>~50</td>\n\t\t<td>âœ… Working</td>\n\t\t<td>Yes</td>\n\t</tr>\n\t<tr>\n\t\t<td>`EmptyState`</td>\n\t\t<td>~40</td>\n\t\t<td>âœ… Working</td>\n\t\t<td>Yes</td>\n\t</tr>\n\t<tr>\n\t\t<td>`LoadingSpinner`</td>\n\t\t<td>~30</td>\n\t\t<td>âœ… Working</td>\n\t\t<td>Yes</td>\n\t</tr>\n\t<tr>\n\t\t<td>`StatusBadge`</td>\n\t\t<td>~25</td>\n\t\t<td>âœ… Working</td>\n\t\t<td>Yes</td>\n\t</tr>\n</table>\n\n### Foundation Components (src/foundation/components/)\n\n<table header-row=\"true\">\n\t<tr>\n\t\t<td>Component</td>\n\t\t<td>Lines</td>\n\t\t<td>Status</td>\n\t\t<td>Action</td>\n\t</tr>\n\t<tr>\n\t\t<td>`DataPanel`</td>\n\t\t<td>59</td>\n\t\t<td>âœ… Working</td>\n\t\t<td>Keep â€” Generic panel wrapper</td>\n\t</tr>\n\t<tr>\n\t\t<td>`MetricCard`</td>\n\t\t<td>76</td>\n\t\t<td>âœ… Working</td>\n\t\t<td>Keep â€” Rename to StatCard</td>\n\t</tr>\n\t<tr>\n\t\t<td>`GlowButton`</td>\n\t\t<td>114</td>\n\t\t<td>âœ… Working</td>\n\t\t<td>Keep â€” Button primitive</td>\n\t</tr>\n</table>\n\n### Console-Specific Components (Inline in NarrativeArchitect)\n\n<table header-row=\"true\">\n\t<tr>\n\t\t<td>Component</td>\n\t\t<td>Lines</td>\n\t\t<td>Status</td>\n\t\t<td>Action</td>\n\t</tr>\n\t<tr>\n\t\t<td>`ViewToggle`</td>\n\t\t<td>~50</td>\n\t\t<td>Inline</td>\n\t\t<td>**EXTRACT** â†’ Generic toggle</td>\n\t</tr>\n\t<tr>\n\t\t<td>`JourneyList`</td>\n\t\t<td>~45</td>\n\t\t<td>Inline</td>\n\t\t<td>**EXTRACT** â†’ ObjectList</td>\n\t</tr>\n\t<tr>\n\t\t<td>`PersonaList`</td>\n\t\t<td>~35</td>\n\t\t<td>Inline</td>\n\t\t<td>**EXTRACT** â†’ ObjectList</td>\n\t</tr>\n\t<tr>\n\t\t<td>`NodeGrid`</td>\n\t\t<td>~60</td>\n\t\t<td>Inline</td>\n\t\t<td>**EXTRACT** â†’ CollectionGrid</td>\n\t</tr>\n\t<tr>\n\t\t<td>`CardGrid`</td>\n\t\t<td>~45</td>\n\t\t<td>Inline</td>\n\t\t<td>**EXTRACT** â†’ CollectionGrid</td>\n\t</tr>\n</table>\n\n### Inspectors (src/foundation/inspectors/)\n\n<table header-row=\"true\">\n\t<tr>\n\t\t<td>Inspector</td>\n\t\t<td>Lines</td>\n\t\t<td>Status</td>\n\t\t<td>Action</td>\n\t</tr>\n\t<tr>\n\t\t<td>`JourneyInspector`</td>\n\t\t<td>167</td>\n\t\t<td>âœ… Complete</td>\n\t\t<td>Reference implementation</td>\n\t</tr>\n\t<tr>\n\t\t<td>`NodeInspector`</td>\n\t\t<td>192</td>\n\t\t<td>âœ… Complete</td>\n\t\t<td>Reference implementation</td>\n\t</tr>\n\t<tr>\n\t\t<td>`SproutReviewInspector`</td>\n\t\t<td>215</td>\n\t\t<td>âœ… Complete</td>\n\t\t<td>Reference implementation</td>\n\t</tr>\n\t<tr>\n\t\t<td>`PersonaInspector`</td>\n\t\t<td>â€”</td>\n\t\t<td>Placeholder</td>\n\t\t<td>Implement</td>\n\t</tr>\n\t<tr>\n\t\t<td>`CardInspector`</td>\n\t\t<td>â€”</td>\n\t\t<td>Placeholder</td>\n\t\t<td>Implement</td>\n\t</tr>\n</table>\n\n---\n\n## Data Layer Analysis\n\n### Current Schema Types (narratives-schema.ts)\n\n```tsx\n// V2.1 Types (Journey-based)\ninterface Journey {\n  id: string;\n  title: string;\n  description: string;\n  status: 'draft' | 'active' | 'archived';\n  version?: number;\n  entryNodeId?: string;\n  estimatedMinutes?: number;\n  linkedHubId?: string;\n  createdAt?: string;\n  updatedAt?: string;\n}\n\ninterface JourneyNode {\n  id: string;\n  label: string;\n  query: string;\n  journeyId: string;\n  sequenceOrder?: number;\n  primaryNext?: string;\n  alternateNext?: string[];\n  hubId?: string;\n  sectionId?: string;\n  contextSnippet?: string;\n}\n\ninterface TopicHub {\n  id: string;\n  title: string;\n  tags: string[];\n  priority: number;\n  enabled: boolean;\n  primarySource: string;\n  supportingSources: string[];\n  expertFraming: string;\n  keyPoints: string[];\n  createdAt?: string;\n  updatedAt?: string;\n}\n\n// V2.0 Types (Card-based)\ninterface Persona { ... }\ninterface Card { ... }\n```\n\n### Gap Analysis: Current Types vs DEXObject\n\n**Missing from Current Types:**\n\n- `proposedBy: 'human' | 'agent'` â€” Agent proposal tracking\n- `approvedBy?: string` â€” Human approval tracking\n- `telemetryScore?: number` â€” Usage/effectiveness metrics\n- `evolutionHistory?: VersionEntry[]` â€” Change tracking\n\n**Current Types Map to DEX:**\n\n<table header-row=\"true\">\n\t<tr>\n\t\t<td>Current Type</td>\n\t\t<td>DEX Type</td>\n\t\t<td>Notes</td>\n\t</tr>\n\t<tr>\n\t\t<td>`Journey`</td>\n\t\t<td>`DEXJourney`</td>\n\t\t<td>Add kinetic fields</td>\n\t</tr>\n\t<tr>\n\t\t<td>`JourneyNode`</td>\n\t\t<td>`DEXNode`</td>\n\t\t<td>Add kinetic fields</td>\n\t</tr>\n\t<tr>\n\t\t<td>`TopicHub`</td>\n\t\t<td>`DEXHub`</td>\n\t\t<td>Add kinetic fields</td>\n\t</tr>\n\t<tr>\n\t\t<td>`Persona`</td>\n\t\t<td>`DEXLens`</td>\n\t\t<td>Rename for clarity</td>\n\t</tr>\n\t<tr>\n\t\t<td>`Card`</td>\n\t\t<td>`DEXCard`</td>\n\t\t<td>Legacy, keep for V2.0</td>\n\t</tr>\n</table>\n\n---\n\n## Hook Analysis\n\n### useNarrativeSchema (337 lines)\n\n**Current Responsibilities:**\n\n1. Load schema from `/api/narrative`\n2. Handle V1 â†’ V2 migration\n3. Provide derived data (allJourneys, allNodes, allCards)\n4. Filter functions (getFilteredCards, getFilteredJourneys, getFilteredNodes)\n5. Selectors (getJourney, getNode, getCard, getPersona)\n6. Save to `/api/admin/narrative`\n7. CRUD operations (updateCard, deleteCard, createCard)\n\n**Refactor Strategy:**\n\n```\nuseNarrativeSchema (current monolith)\n    â†“ Split into:\nuseDEXRegistry (generic object store)\nâ”œâ”€â”€ register(type, objects)\nâ”œâ”€â”€ get(type, id)\nâ”œâ”€â”€ update(type, id, updates)\nâ”œâ”€â”€ delete(type, id)\nâ”œâ”€â”€ filter(type, predicate)\nâ””â”€â”€ subscribe(type, callback)\n\nuseDEXJourneys (domain hook)\nâ”œâ”€â”€ journeys: DEXJourney[]\nâ”œâ”€â”€ getJourney(id)\nâ””â”€â”€ filterJourneys(query)\n\nuseDEXNodes (domain hook)\nâ”œâ”€â”€ nodes: DEXNode[]\nâ”œâ”€â”€ getNode(id)\nâ””â”€â”€ filterNodes(journeyId, query)\n\nuseDEXSync (persistence hook)\nâ”œâ”€â”€ save()\nâ”œâ”€â”€ loading, saving, status\nâ””â”€â”€ GitHub sync status\n```\n\n---\n\n## Console Comparison Matrix\n\n<table header-row=\"true\">\n\t<tr>\n\t\t<td>Feature</td>\n\t\t<td>NarrativeArchitect</td>\n\t\t<td>KnowledgeVault</td>\n\t\t<td>HealthDashboard</td>\n\t\t<td>EngagementBridge</td>\n\t\t<td>SproutQueue</td>\n\t</tr>\n\t<tr>\n\t\t<td>Uses ThreeColumnLayout</td>\n\t\t<td>âœ… (via Outlet)</td>\n\t\t<td>âŒ</td>\n\t\t<td>âŒ</td>\n\t\t<td>âŒ</td>\n\t\t<td>âœ… (via Outlet)</td>\n\t</tr>\n\t<tr>\n\t\t<td>Uses FoundationUIContext</td>\n\t\t<td>âœ…</td>\n\t\t<td>âŒ</td>\n\t\t<td>âŒ</td>\n\t\t<td>âŒ</td>\n\t\t<td>âœ…</td>\n\t</tr>\n\t<tr>\n\t\t<td>Has Inspector</td>\n\t\t<td>âœ…</td>\n\t\t<td>âŒ</td>\n\t\t<td>âŒ</td>\n\t\t<td>âŒ</td>\n\t\t<td>âœ…</td>\n\t</tr>\n\t<tr>\n\t\t<td>Uses DataPanel</td>\n\t\t<td>âœ…</td>\n\t\t<td>âœ…</td>\n\t\t<td>âœ…</td>\n\t\t<td>âœ…</td>\n\t\t<td>âŒ</td>\n\t</tr>\n\t<tr>\n\t\t<td>Uses MetricCard</td>\n\t\t<td>âœ…</td>\n\t\t<td>âœ…</td>\n\t\t<td>âœ…</td>\n\t\t<td>âœ…</td>\n\t\t<td>âœ…</td>\n\t</tr>\n\t<tr>\n\t\t<td>Uses GlowButton</td>\n\t\t<td>âœ…</td>\n\t\t<td>âœ…</td>\n\t\t<td>âœ…</td>\n\t\t<td>âœ…</td>\n\t\t<td>âŒ</td>\n\t</tr>\n\t<tr>\n\t\t<td>Uses CollectionHeader</td>\n\t\t<td>âœ…</td>\n\t\t<td>âŒ</td>\n\t\t<td>âŒ</td>\n\t\t<td>âŒ</td>\n\t\t<td>âœ…</td>\n\t</tr>\n\t<tr>\n\t\t<td>Has Tab navigation</td>\n\t\t<td>âŒ (ViewToggle)</td>\n\t\t<td>âŒ</td>\n\t\t<td>âœ… (internal)</td>\n\t\t<td>âœ… (internal)</td>\n\t\t<td>âœ… (filter tabs)</td>\n\t</tr>\n\t<tr>\n\t\t<td>Lines</td>\n\t\t<td>571</td>\n\t\t<td>223</td>\n\t\t<td>540</td>\n\t\t<td>333</td>\n\t\t<td>146</td>\n\t</tr>\n</table>\n\n---\n\n## Extraction Plan\n\n### Phase 1: Extract Component Grammar (No Breaking Changes)\n\n**From NarrativeArchitect, extract:**\n\n1. **ViewToggle â†’ SegmentedControl**\n\n```tsx\ninterface SegmentedControlProps<T extends string> {\n  options: { id: T; label: string; icon?: string }[];\n  value: T;\n  onChange: (value: T) => void;\n}\n```\n\n2. **JourneyList + PersonaList â†’ ObjectList**\n\n```tsx\ninterface ObjectListProps<T> {\n  items: T[];\n  selectedId: string | null;\n  activeInspectorId: string | null;\n  onSelect: (id: string) => void;\n  renderItem: (item: T) => { label: string; count?: number; status?: 'active' | 'inactive' };\n  emptyMessage?: string;\n}\n```\n\n3. **NodeGrid + CardGrid â†’ ObjectGrid**\n\n```tsx\ninterface ObjectGridProps<T> {\n  items: T[];\n  activeInspectorId: string | null;\n  searchQuery: string;\n  onSelect: (id: string) => void;\n  renderCard: (item: T) => { title: string; subtitle: string; badges: Badge[] };\n  emptyMessage?: string;\n  columns?: 2 | 3 | 4;\n}\n```\n\n### Phase 2: Create DEXObject Type System\n\n```tsx\n// src/core/schema/dex.ts\n\n/** Base interface for all DEX-compliant objects */\nexport interface DEXObject {\n  id: string;\n  type: DEXObjectType;\n  label: string;\n  description?: string;\n  icon?: string;\n  color?: string;\n  status: 'draft' | 'active' | 'archived';\n  \n  // Versioning\n  version: number;\n  createdAt: string;\n  updatedAt: string;\n  \n  // Kinetic metadata\n  proposedBy?: 'human' | 'agent';\n  approvedBy?: string;\n  telemetryScore?: number;\n  evolutionHistory?: DEXVersionEntry[];\n}\n\nexport type DEXObjectType = 'lens' | 'journey' | 'node' | 'hub' | 'card' | 'sprout';\n\n/** Extended types */\nexport interface DEXJourney extends DEXObject {\n  type: 'journey';\n  entryNodeId?: string;\n  estimatedMinutes?: number;\n  linkedHubId?: string;\n}\n\nexport interface DEXNode extends DEXObject {\n  type: 'node';\n  query: string;\n  journeyId: string;\n  sequenceOrder?: number;\n  primaryNext?: string;\n  alternateNext?: string[];\n  hubId?: string;\n  sectionId?: string;\n  contextSnippet?: string;\n}\n\nexport interface DEXHub extends DEXObject {\n  type: 'hub';\n  tags: string[];\n  priority: number;\n  enabled: boolean;\n  primarySource: string;\n  supportingSources: string[];\n  expertFraming: string;\n  keyPoints: string[];\n}\n\nexport interface DEXLens extends DEXObject {\n  type: 'lens';\n  enabled: boolean;\n  toneGuidance: string;\n  narrativeStyle: string;\n  arcEmphasis: Record<string, number>;\n  openingPhase: string;\n  defaultThreadLength: number;\n  entryPoints: string[];\n  suggestedThread: string[];\n}\n```\n\n### Phase 3: Create DEXRegistry\n\n```tsx\n// src/core/registry/DEXRegistry.ts\n\nexport interface DEXRegistry {\n  // Read operations\n  get<T extends DEXObject>(type: DEXObjectType, id: string): T | null;\n  getAll<T extends DEXObject>(type: DEXObjectType): T[];\n  filter<T extends DEXObject>(type: DEXObjectType, predicate: (item: T) => boolean): T[];\n  \n  // Write operations\n  register<T extends DEXObject>(type: DEXObjectType, objects: Record<string, T>): void;\n  update<T extends DEXObject>(type: DEXObjectType, id: string, updates: Partial<T>): void;\n  delete(type: DEXObjectType, id: string): void;\n  create<T extends DEXObject>(type: DEXObjectType, object: Omit<T, 'id' | 'version' | 'createdAt' | 'updatedAt'>): string;\n  \n  // Subscriptions\n  subscribe(type: DEXObjectType, callback: (objects: DEXObject[]) => void): () => void;\n  \n  // Persistence\n  hydrate(schema: NarrativeSchemaV2): void;\n  dehydrate(): NarrativeSchemaV2;\n}\n```\n\n---\n\n## Migration Path\n\n### Sprint 1: Extract & Unify (This Sprint)\n\n**Deliverables:**\n\n1. Extract `SegmentedControl`, `ObjectList`, `ObjectGrid` from NarrativeArchitect\n2. Create `DEXObject` type system in `src/core/schema/dex.ts`\n3. Create `useDEXRegistry` hook (React context-based)\n4. Refactor `useNarrativeSchema` to use DEXRegistry internally\n5. NarrativeArchitect continues working (no breaking changes)\n\n**Success Criteria:**\n\n- All existing tests pass\n- NarrativeArchitect looks and works identically\n- New components are documented in shared/\n- DEXObject types export from @core/schema\n\n### Sprint 2: Migrate Consoles\n\n- Refactor SproutQueue to use ObjectGrid\n- Add inspector to KnowledgeVault\n- Unify tab patterns across consoles\n\n### Sprint 3: Agent Proposal Pipeline\n\n- Add proposal queue to DEXRegistry\n- Implement agent â†’ proposal â†’ human approval flow\n- Add telemetry scoring hooks\n\n---\n\n## Risk Assessment\n\n<table header-row=\"true\">\n\t<tr>\n\t\t<td>Risk</td>\n\t\t<td>Likelihood</td>\n\t\t<td>Impact</td>\n\t\t<td>Mitigation</td>\n\t</tr>\n\t<tr>\n\t\t<td>Breaking existing tests</td>\n\t\t<td>Medium</td>\n\t\t<td>High</td>\n\t\t<td>Run tests continuously during refactor</td>\n\t</tr>\n\t<tr>\n\t\t<td>Schema migration errors</td>\n\t\t<td>Low</td>\n\t\t<td>High</td>\n\t\t<td>Add validation layer, keep V2.0 compatibility</td>\n\t</tr>\n\t<tr>\n\t\t<td>Performance regression</td>\n\t\t<td>Low</td>\n\t\t<td>Medium</td>\n\t\t<td>Benchmark before/after</td>\n\t</tr>\n\t<tr>\n\t\t<td>Over-abstraction</td>\n\t\t<td>Medium</td>\n\t\t<td>Medium</td>\n\t\t<td>Start minimal, add features as needed</td>\n\t</tr>\n</table>\n\n---\n\n## Appendix: File Inventory\n\n**Files to Modify:**\n\n- `src/foundation/consoles/NarrativeArchitect.tsx` (571 lines)\n- `src/foundation/hooks/useNarrativeSchema.ts` (337 lines)\n- `data/narratives-schema.ts` (596 lines)\n\n**Files to Create:**\n\n- `src/core/schema/dex.ts` â€” DEXObject type system\n- `src/core/registry/DEXRegistry.ts` â€” Central object store\n- `src/core/registry/useDEXRegistry.ts` â€” React hook\n- `src/shared/SegmentedControl.tsx` â€” View toggle\n- `src/shared/ObjectList.tsx` â€” Generic list\n- `src/shared/ObjectGrid.tsx` â€” Generic grid\n\n**Files Unchanged:**\n\n- All inspector components (already well-structured)\n- ThreeColumnLayout, InspectorPanel (working as-is)\n- DataPanel, MetricCard, GlowButton (keep as-is)\n\n---\n\n## Next Step\n\nThis analysis provides clear scope for the Foundation Sprint Spec:\n\n1. **Extract component grammar** â€” 3 new shared components\n2. **Create DEX types** â€” New schema file\n3. **Create DEXRegistry** â€” Central store pattern\n4. **Refactor useNarrativeSchema** â€” Internal change, API stable\n5. **Update NarrativeArchitect** â€” Use new components\n\nEstimated effort: **2-3 focused sessions** with Claude Code."
  },
  {
    "notion_id": "2ee780a78eef81c3bf38fe145dd84b82",
    "filename": "251200-s-spec-research-agent-product-vision.md--FINAL.md",
    "tables_count": 6,
    "converted_content": "\n# Grove Research Agent: Product Vision & Plan\n\n**Document Type:** Product Vision & Roadmap  \n**Author:** Jim Calhoun, Grove AI Foundation  \n**Created:** December 28, 2025  \n**Status:** Draft for Review  \n\n---\n\n## Executive Summary\n\nThe Research Agent transforms Grove from a knowledge *retrieval* system into a knowledge *growth* system. Observers commission deep research on any topic, receive structured analysis with citations, and add validated findings directly to their personal knowledge base.\n\n**The core insight:** Research isn't a featureâ€”it's infrastructure for how intelligence compounds in Grove. Every research request yields new Sprouts that make future exploration smarter.\n\n**MVP scope:** Observer issues research query â†’ Agent produces structured document â†’ Observer approves â†’ Document enters RAG for future retrieval.\n\n**Vision scope:** Research yields atomic Sprouts with provenance chains, connection suggestions, and confidence ratingsâ€”building a personal knowledge graph through exploration.\n\n---\n\n## Strategic Context\n\n### Why Research Matters for Grove\n\nGrove's value proposition is *exploration architecture*â€”infrastructure where humans and AI discover together. But exploration requires mechanisms for knowledge accumulation. Currently, Sprouts emerge only from conversation. This constrains growth to conversational serendipity.\n\nResearch Agent adds intentional knowledge expansion:\n\n<table header-row=\"true\">\n\t<tr>\n\t\t<td>Growth Mode</td>\n\t\t<td>Mechanism</td>\n\t\t<td>Speed</td>\n\t\t<td>Coverage</td>\n\t</tr>\n\t<tr>\n\t\t<td>Conversational</td>\n\t\t<td>Insights emerge from dialogue</td>\n\t\t<td>Organic</td>\n\t\t<td>Narrow (follows conversation)</td>\n\t</tr>\n\t<tr>\n\t\t<td>**Research**</td>\n\t\t<td>Observer commissions targeted exploration</td>\n\t\t<td>Rapid</td>\n\t\t<td>Broad (systematic coverage)</td>\n\t</tr>\n\t<tr>\n\t\t<td>Import</td>\n\t\t<td>Observer adds external documents</td>\n\t\t<td>Variable</td>\n\t\t<td>Observer-dependent</td>\n\t</tr>\n</table>\n\nResearch bridges passive discovery and active curation.\n\n### Competitive Positioning\n\n<table header-row=\"true\">\n\t<tr>\n\t\t<td>Product</td>\n\t\t<td>Research Capability</td>\n\t\t<td>Knowledge Ownership</td>\n\t</tr>\n\t<tr>\n\t\t<td>ChatGPT</td>\n\t\t<td>Basic web search, ephemeral</td>\n\t\t<td>Platform owns context</td>\n\t</tr>\n\t<tr>\n\t\t<td>Perplexity</td>\n\t\t<td>Strong search, citations</td>\n\t\t<td>No persistent knowledge base</td>\n\t</tr>\n\t<tr>\n\t\t<td>Notion AI</td>\n\t\t<td>Document Q&amp;A</td>\n\t\t<td>User owns docs, AI is query layer</td>\n\t</tr>\n\t<tr>\n\t\t<td>**Grove**</td>\n\t\t<td>Research â†’ Sprouts â†’ RAG</td>\n\t\t<td>Observer owns growing knowledge graph</td>\n\t</tr>\n</table>\n\nGrove's differentiator: Research doesn't just answer questionsâ€”it *expands your exploration capacity*. Every research session makes future exploration more productive.\n\n### Alignment with Trellis Architecture\n\nResearch Agent implements DEX principles:\n\n<table header-row=\"true\">\n\t<tr>\n\t\t<td>Principle</td>\n\t\t<td>Implementation</td>\n\t</tr>\n\t<tr>\n\t\t<td>**Declarative Sovereignty**</td>\n\t\t<td>Research output format defined by schema, not code</td>\n\t</tr>\n\t<tr>\n\t\t<td>**Capability Agnosticism**</td>\n\t\t<td>Works with any model that can search and synthesize</td>\n\t</tr>\n\t<tr>\n\t\t<td>**Provenance as Infrastructure**</td>\n\t\t<td>Every claim traces to source URL and search query</td>\n\t</tr>\n\t<tr>\n\t\t<td>**Organic Scalability**</td>\n\t\t<td>Starts as single document, evolves to atomic Sprouts</td>\n\t</tr>\n</table>\n\n---\n\n## User Personas & Jobs to Be Done\n\n### Primary Persona: The Systematic Explorer\n\n**Profile:** Professional navigating unfamiliar territoryâ€”regulatory landscape, competitive analysis, technical architecture decision.\n\n**Job to be done:** \"I need to understand [complex topic] well enough to make decisions and explain my reasoning to others.\"\n\n**Current alternatives:** \n- Multiple ChatGPT sessions (no persistence)\n- Perplexity searches (good sources, no accumulation)\n- Manual research and note-taking (time-intensive)\n\n**Grove Research value:** Structured output with citations becomes permanent exploration infrastructure.\n\n### Secondary Persona: The Knowledge Architect\n\n**Profile:** Researcher, analyst, or consultant building domain expertise over time.\n\n**Job to be done:** \"I want to systematically construct a knowledge base on [domain] that compounds with use.\"\n\n**Current alternatives:**\n- Notion/Roam with manual entry\n- Zotero for academic sources\n- Personal wikis\n\n**Grove Research value:** Research compoundsâ€”each document enhances RAG, improving future research and exploration quality.\n\n### Tertiary Persona: The Insight Validator\n\n**Profile:** Observer who captured an insight from conversation but wants verification/expansion.\n\n**Job to be done:** \"I noted this claim in explorationâ€”is it actually true? What's the fuller context?\"\n\n**Current alternatives:**\n- Manual Google search\n- Ask ChatGPT to verify (no sources)\n- Ignore the uncertainty\n\n**Grove Research value:** \"Research This\" on existing Sprout returns validated analysis that can replace or supplement the original.\n\n---\n\n## Product Vision\n\n### The End State (v2.0+)\n\nResearch in Grove feels like having a research assistant who:\n1. Understands your existing knowledge (reads your Grove)\n2. Identifies exploration opportunities (knows gaps)\n3. Produces atomic, citable insights (Sprouts with provenance)\n4. Maps new terrain to familiar ground (links findings to existing Sprouts)\n5. Learns your exploration patterns\n\n**User experience:**\n\n```\nObserver: /research What are the pricing models for distributed inference?\n\nGrove: I see you have existing Sprouts on inference costs and edge \n       computing economics. I'll build on those.\n       \n       [Research in progress... 6 sources found]\n       \n       Research complete. I've harvested 5 insights:\n       \n       ğŸŒ± \"Compute-time metering dominates current pricing...\"\n          confidence: 0.9 | connects to: \"Edge latency Sprout\"\n       \n       ğŸŒ± \"Outcome-based pricing is emerging but requires...\"\n          confidence: 0.7 | new thread\n       \n       [Continue with 3 more...]\n       \n       [Review All] [Quick Accept] [Dismiss]\n```\n\n### The MVP (v1.0)\n\nResearch produces a single structured document that enters RAG on approval.\n\n**User experience:**\n\n```\nObserver: /research What are the pricing models for distributed inference?\n\nGrove: ğŸ”¬ Researching... (exploration in progress)\n       \n       [Progress: Searching... Analyzing... Synthesizing...]\n       \n       ğŸ“„ Research Complete\n       \n       \"Distributed inference networks converge on three \n       pricing models: compute-time metering, QoS tiers, and \n       outcome-based pricing.\"\n       \n       3 citations | ~2,400 words | 47 seconds\n       \n       [View Full Document] [Add to Knowledge Base]\n```\n\n---\n\n## MVP Specification\n\n### Functional Requirements\n\n#### FR-1: Research Command\n\n**Trigger:** Observer types `/research [query]` in Terminal command input.\n\n**Validation:**\n- Query must be 10-500 characters\n- Query must be a question or topic, not a command\n\n**Response:** System acknowledges and begins research.\n\n#### FR-2: Research Agent Execution\n\n**Process:**\n1. System prompt instructs agent on research methodology\n2. Agent accesses web search tool\n3. Agent performs 3-8 searches based on query complexity\n4. Agent synthesizes findings into structured document\n5. Agent returns document with citations\n\n**Timeout:** 3 minutes maximum. If exceeded, return partial results with note.\n\n**Cost tracking:** Log credit usage per research request for future rate limiting.\n\n#### FR-3: Research Document Schema\n\n```typescript\ninterface ResearchDocument {\n  id: string;\n  query: string;\n  \n  // The content\n  position: string;           // 1-3 sentence thesis\n  analysis: string;           // Full analysis (markdown)\n  citations: Citation[];\n  \n  // Metadata\n  createdAt: number;\n  searchesPerformed: number;\n  creditsUsed: number;\n  durationMs: number;\n  \n  // Status\n  status: 'pending' | 'complete' | 'partial' | 'failed';\n  ragStatus: 'not_added' | 'added';\n}\n\ninterface Citation {\n  index: number;              // [1], [2], etc.\n  title: string;\n  url: string;\n  snippet: string;            // Relevant excerpt\n  domain: string;             // For credibility signal\n  accessedAt: number;\n}\n```\n\n#### FR-4: Document Display\n\n**In-stream preview:**\n- Position (thesis) displayed\n- Citation count and word count shown\n- Two CTAs: \"View Full Document\" and \"Add to Knowledge Base\"\n\n**Full document view:**\n- Modal or slide-out panel\n- Rendered markdown with citation links\n- Sticky header with title and actions\n- Citation list at bottom with snippets\n\n#### FR-5: RAG Integration\n\n**\"Add to Knowledge Base\" flow:**\n1. Observer clicks CTA\n2. Confirmation: \"Add this research to your knowledge base? It will enhance future explorations.\"\n3. On confirm: Document indexed to vector store\n4. Success feedback: \"Research added. Your Grove can now reference this knowledge.\"\n\n**Indexing strategy:**\n- Embed full document as single chunk (MVP simplicity)\n- Metadata includes: query, citation URLs, creation date\n- Retrieval: Standard semantic search against Observer's Grove\n\n#### FR-6: Research History\n\n**Requirement:** Observer can view past research documents.\n\n**Access:** `/research history` command or dedicated UI route.\n\n**Display:** List of past research with query, date, status, and RAG status.\n\n### Non-Functional Requirements\n\n#### NFR-1: Performance\n\n- Research completes in <90 seconds for typical queries\n- Timeout at 180 seconds with graceful partial results\n- Progress indication every 10 seconds\n\n#### NFR-2: Cost Management\n\n- MVP: No hard limits, but log all usage\n- Track: credits consumed, searches performed, duration\n- Future: Implement daily/monthly quotas based on efficiency loop\n\n#### NFR-3: Quality\n\n- Citations must be real, accessible URLs\n- Position must derive from analysis\n- Analysis must reference citations inline\n\n#### NFR-4: Error Handling\n\n- Network failures: Retry once, then fail gracefully\n- No results: Return \"insufficient sources\" with suggestions\n- Timeout: Return partial results with \"research incomplete\" flag\n\n### User Interface Specifications\n\n#### UI-1: Research Command Input\n\nLocation: Terminal command input (existing)\n\nBehavior:\n- `/research ` prefix triggers research mode\n- Input field placeholder changes: \"What would you like to explore?\"\n- Submit initiates research flow\n\n#### UI-2: Research Progress Indicator\n\nLocation: Kinetic Stream (new StreamItem type or SystemEvent enhancement)\n\nStates:\n```\nğŸ”¬ Researching: \"distributed inference pricing\"\n   Searching for sources...\n   \nğŸ”¬ Researching: \"distributed inference pricing\"\n   Analyzing 6 sources...\n   \nğŸ”¬ Researching: \"distributed inference pricing\"\n   Synthesizing findings...\n```\n\nVisual: Subtle animation matching Kinetic Stream cognitive states.\n\n#### UI-3: Research Result Block\n\nLocation: Stream (new block type)\n\nLayout:\n```\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ ğŸ“„ Research Complete                                        â”‚\nâ”‚                                                             â”‚\nâ”‚ [Position text - 1-3 sentences, the thesis]                 â”‚\nâ”‚                                                             â”‚\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚\nâ”‚ 3 citations  â€¢  ~2,400 words  â€¢  47s                        â”‚\nâ”‚                                                             â”‚\nâ”‚ [View Full Document]  [Add to Knowledge Base]               â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n```\n\nStyling: GlassPanel variant, distinct from response blocks.\n\n#### UI-4: Full Document Viewer\n\nLocation: Modal overlay or slide-out panel\n\nLayout:\n```\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ Research: \"distributed inference pricing models\"        [X] â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚                                                             â”‚\nâ”‚ # Position                                                  â”‚\nâ”‚                                                             â”‚\nâ”‚ Distributed inference networks converge on three            â”‚\nâ”‚ pricing models: compute-time metering, quality-of-service   â”‚\nâ”‚ tiers, and outcome-based pricing.                           â”‚\nâ”‚                                                             â”‚\nâ”‚ # Analysis                                                  â”‚\nâ”‚                                                             â”‚\nâ”‚ ## Compute-Time Metering                                    â”‚\nâ”‚                                                             â”‚\nâ”‚ The dominant model in current distributed inference         â”‚\nâ”‚ networks charges per inference-second or per-credit [1].    â”‚\nâ”‚ This approach mirrors traditional cloud computing...        â”‚\nâ”‚                                                             â”‚\nâ”‚ [... continued ...]                                         â”‚\nâ”‚                                                             â”‚\nâ”‚ # Citations                                                 â”‚\nâ”‚                                                             â”‚\nâ”‚ [1] \"Decentralized Inference Pricing\" - arxiv.org           â”‚\nâ”‚     \"The paper proposes a metering framework...\"            â”‚\nâ”‚                                                             â”‚\nâ”‚ [2] \"Edge AI Economics\" - a16z.com                          â”‚\nâ”‚     \"Andreessen Horowitz analysis of pricing trends...\"     â”‚\nâ”‚                                                             â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚                      [Add to Knowledge Base]                â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n```\n\n#### UI-5: RAG Confirmation\n\nTrigger: Observer clicks \"Add to Knowledge Base\"\n\nModal:\n```\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ Add to Knowledge Base                                       â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚                                                             â”‚\nâ”‚ This research will join your Grove and enhance              â”‚\nâ”‚ future explorations.                                        â”‚\nâ”‚                                                             â”‚\nâ”‚ Query: \"distributed inference pricing models\"               â”‚\nâ”‚ Size: ~2,400 words, 3 citations                             â”‚\nâ”‚                                                             â”‚\nâ”‚                          [Cancel]  [Add]                    â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n```\n\nSuccess toast: \"âœ“ Research added to your knowledge base\"\n\n---\n\n## Technical Architecture\n\n### System Overview\n\n```\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚                         Terminal                             â”‚\nâ”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚\nâ”‚  â”‚ /research [query]                                       â”‚â”‚\nâ”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                              â”‚\n                              â–¼\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚                    Research Handler                          â”‚\nâ”‚  - Validates query                                           â”‚\nâ”‚  - Creates ResearchJob                                       â”‚\nâ”‚  - Invokes Research Agent                                    â”‚\nâ”‚  - Streams progress to Terminal                              â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                              â”‚\n                              â–¼\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚                    Research Agent                            â”‚\nâ”‚  - System prompt with methodology                            â”‚\nâ”‚  - Tool: web_search                                          â”‚\nâ”‚  - Iterative search/analyze/synthesize loop                  â”‚\nâ”‚  - Returns structured ResearchDocument                       â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                              â”‚\n                              â–¼\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚                    Document Storage                          â”‚\nâ”‚  - Stores ResearchDocument                                   â”‚\nâ”‚  - Tracks RAG status                                         â”‚\nâ”‚  - Enables history retrieval                                 â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                              â”‚\n                              â–¼ (on Observer approval)\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚                    Vector Store (RAG)                        â”‚\nâ”‚  - Embeds document                                           â”‚\nâ”‚  - Stores with metadata                                      â”‚\nâ”‚  - Available for future retrieval                            â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n```\n\n### Research Agent Design\n\n#### Agent Loop\n\n```typescript\nasync function executeResearch(query: string): Promise<ResearchDocument> {\n  const agent = new ClaudeAgent({\n    model: 'claude-sonnet-4-20250514',\n    maxCredits: 8000,\n    systemPrompt: RESEARCH_SYSTEM_PROMPT,\n    tools: [webSearchTool]\n  });\n  \n  // Single prompt that guides multi-step research\n  const result = await agent.run(`\n    Research query: \"${query}\"\n    \n    Follow your methodology:\n    1. Scope the question\n    2. Search for authoritative sources (3-8 searches)\n    3. Analyze findings\n    4. Synthesize into position + analysis + citations\n    \n    Return your findings in the specified JSON format.\n  `);\n  \n  return parseResearchOutput(result);\n}\n```\n\n#### System Prompt\n\n```markdown\nYou are a research agent for Grove, exploration architecture for AI and humans.\n\n## Your Mission\n\nTransform a research query into structured knowledge with:\n- A clear position (thesis)\n- Supporting analysis\n- Verified citations\n\n## Research Methodology\n\n### Phase 1: Scope (no searches)\n- Clarify the research question\n- Identify 3-5 key aspects to investigate\n- Define what's in/out of scope\n\n### Phase 2: Search (3-8 searches)\n- Start broad, then narrow based on findings\n- Prioritize: academic sources, official documentation, recognized experts\n- Avoid: forums, social media, SEO-optimized content farms\n- For each search, extract the most valuable 1-2 sources\n\n### Phase 3: Analyze\n- Extract key claims from sources\n- Identify areas of consensus and disagreement\n- Note gaps in available information\n\n### Phase 4: Synthesize\n- Form a clear position based on evidence\n- Structure analysis into logical sections\n- Cite sources inline using [n] notation\n- State confidence levels and limitations explicitly\n\n## Output Format\n\nReturn valid JSON:\n\n```json\n{\n  \"position\": \"1-3 sentence thesis summarizing findings\",\n  \"analysis\": \"Full markdown analysis with ## sections and [n] citations\",\n  \"citations\": [\n    {\n      \"index\": 1,\n      \"title\": \"Source title\",\n      \"url\": \"https://...\",\n      \"snippet\": \"Relevant excerpt from source\",\n      \"domain\": \"arxiv.org\"\n    }\n  ],\n  \"searchesPerformed\": 5,\n  \"limitations\": \"What couldn't be determined or verified\"\n}\n```\n\n## Quality Standards\n\n- Every claim in analysis requires a citation\n- Position derives from analysis\n- Acknowledge uncertainty explicitly\n- Prefer depth over breadth\n- When sources conflict, present both views\n\n## Constraints\n\n- Maximum 8 web searches\n- Return results even if incomplete\n- Never fabricate sources\n- URLs must be real and accessible\n```\n\n### API Integration\n\n#### Endpoint\n\n```typescript\n// POST /api/research\ninterface ResearchRequest {\n  query: string;\n  options?: {\n    maxSearches?: number;    // default: 8\n    timeout?: number;        // default: 180000 (3 min)\n  };\n}\n\ninterface ResearchResponse {\n  jobId: string;\n  status: 'started' | 'complete' | 'failed';\n  document?: ResearchDocument;\n  error?: string;\n}\n```\n\n#### Streaming Progress\n\nFor MVP, use Server-Sent Events or polling:\n\n```typescript\n// GET /api/research/:jobId/status\ninterface ResearchStatus {\n  jobId: string;\n  status: 'searching' | 'analyzing' | 'synthesizing' | 'complete' | 'failed';\n  progress?: string;         // Human-readable progress\n  searchesComplete?: number;\n  document?: ResearchDocument;\n}\n```\n\n### RAG Integration\n\n#### Embedding Strategy\n\nMVP: Embed full document as single vector.\n\n```typescript\nasync function addToRAG(doc: ResearchDocument): Promise<void> {\n  const content = formatForEmbedding(doc);\n  \n  await vectorStore.upsert({\n    id: doc.id,\n    vector: await embed(content),\n    metadata: {\n      type: 'research',\n      query: doc.query,\n      position: doc.position,\n      citationCount: doc.citations.length,\n      citationUrls: doc.citations.map(c => c.url),\n      createdAt: doc.createdAt,\n      wordCount: countWords(doc.analysis)\n    }\n  });\n}\n\nfunction formatForEmbedding(doc: ResearchDocument): string {\n  return `\nResearch Query: ${doc.query}\n\nPosition: ${doc.position}\n\nAnalysis:\n${doc.analysis}\n\nKey Sources: ${doc.citations.map(c => c.title).join(', ')}\n  `.trim();\n}\n```\n\n#### Retrieval\n\nResearch documents retrieved alongside other Sprouts:\n\n```typescript\nasync function retrieveContext(query: string): Promise<Context[]> {\n  const results = await vectorStore.search({\n    query,\n    topK: 10,\n    filter: { observerId: currentObserver.id }\n  });\n  \n  // Research documents are just another context type\n  return results.map(r => ({\n    type: r.metadata.type,  // 'research' | 'sprout' | 'conversation'\n    content: r.content,\n    relevance: r.score,\n    source: r.metadata\n  }));\n}\n```\n\n---\n\n## Roadmap\n\n### Phase 1: MVP (v1.0)\n\n**Timeline:** 2-3 weeks  \n**Goal:** Basic research â†’ document â†’ RAG flow\n\n**Deliverables:**\n- `/research` command handler\n- Research agent with web search\n- ResearchResultBlock in Terminal\n- Document viewer (modal)\n- RAG integration\n- Research history (basic)\n\n**Success criteria:**\n- Observer can issue research query\n- Document returns in <2 minutes\n- Document can be added to RAG\n- Document is retrievable in future conversations\n\n### Phase 2: Polish & Validate (v1.1)\n\n**Timeline:** 2 weeks  \n**Goal:** Quality improvements based on usage\n\n**Deliverables:**\n- Research from existing Sprout (\"Research This\" button)\n- Improved progress indication\n- Better error handling and partial results\n- Usage tracking and basic rate limiting\n- Document editing before RAG addition\n\n**Success criteria:**\n- Research quality meets Observer expectations\n- <10% failure rate\n- Clear feedback on progress and errors\n\n### Phase 3: Atomic Sprouts (v1.2)\n\n**Timeline:** 3-4 weeks  \n**Goal:** Research outputs Sprouts, not just documents\n\n**Deliverables:**\n- Structured analysis with clear sections\n- Section â†’ Sprout atomization on approval\n- Connection suggestions to existing Sprouts\n- Sprout review/edit UI\n- Confidence scoring per Sprout\n\n**Success criteria:**\n- Observers can review and edit individual Sprouts\n- Connections suggested are relevant\n- Sprouts maintain citation provenance\n\n### Phase 4: Full Harvest (v2.0)\n\n**Timeline:** 4-6 weeks  \n**Goal:** Research as intelligent knowledge growth\n\n**Deliverables:**\n- Research agent aware of existing Grove\n- Gap identification (what Observer doesn't know)\n- Multi-document research campaigns\n- Sprout conflict detection (contradicts existing knowledge)\n- Research patterns and recommendations\n\n**Success criteria:**\n- Research builds on existing knowledge\n- Observers report their Grove \"learns from itself\"\n- Research suggests productive exploration paths\n\n---\n\n## Success Metrics\n\n### Engagement Metrics\n\n<table header-row=\"true\">\n\t<tr>\n\t\t<td>Metric</td>\n\t\t<td>MVP Target</td>\n\t\t<td>v2.0 Target</td>\n\t</tr>\n\t<tr>\n\t\t<td>Research queries/Observer/week</td>\n\t\t<td>2+</td>\n\t\t<td>5+</td>\n\t</tr>\n\t<tr>\n\t\t<td>Documents added to RAG</td>\n\t\t<td>60% of completed</td>\n\t\t<td>80% of completed</td>\n\t</tr>\n\t<tr>\n\t\t<td>Research completion rate</td>\n\t\t<td>90%</td>\n\t\t<td>95%</td>\n\t</tr>\n\t<tr>\n\t\t<td>Average research time</td>\n\t\t<td>&lt;90s</td>\n\t\t<td>&lt;60s</td>\n\t</tr>\n</table>\n\n### Quality Metrics\n\n<table header-row=\"true\">\n\t<tr>\n\t\t<td>Metric</td>\n\t\t<td>MVP Target</td>\n\t\t<td>v2.0 Target</td>\n\t</tr>\n\t<tr>\n\t\t<td>Citation accuracy (URLs work)</td>\n\t\t<td>95%</td>\n\t\t<td>99%</td>\n\t</tr>\n\t<tr>\n\t\t<td>Observer satisfaction (thumbs up)</td>\n\t\t<td>70%</td>\n\t\t<td>85%</td>\n\t</tr>\n\t<tr>\n\t\t<td>Research referenced in later conversations</td>\n\t\t<td>Track only</td>\n\t\t<td>40% of added</td>\n\t</tr>\n</table>\n\n### Growth Metrics\n\n<table header-row=\"true\">\n\t<tr>\n\t\t<td>Metric</td>\n\t\t<td>MVP Target</td>\n\t\t<td>v2.0 Target</td>\n\t</tr>\n\t<tr>\n\t\t<td>Sprouts from research</td>\n\t\t<td>N/A (doc only)</td>\n\t\t<td>30% of total Sprouts</td>\n\t</tr>\n\t<tr>\n\t\t<td>Grove size growth from research</td>\n\t\t<td>Track only</td>\n\t\t<td>2x baseline growth</td>\n\t</tr>\n</table>\n\n---\n\n## Risks & Mitigations\n\n### Risk 1: Research Quality Inconsistent\n\n**Likelihood:** High  \n**Impact:** High (core value proposition)\n\n**Mitigations:**\n- Strong system prompt with quality criteria\n- Citation validation before return\n- Observer feedback loop (thumbs up/down)\n- Quality scoring for source domains\n\n### Risk 2: Cost Overruns\n\n**Likelihood:** Medium  \n**Impact:** Medium (unsustainable economics)\n\n**Mitigations:**\n- Credit tracking from day one\n- Search count limits (max 8)\n- Timeout limits (3 min)\n- v1.1: Observer-facing quotas if needed\n\n### Risk 3: Slow Performance\n\n**Likelihood:** Medium  \n**Impact:** Medium (poor UX)\n\n**Mitigations:**\n- Progress indication (Observer knows it's working)\n- Timeout with partial results\n- Future: Background processing option\n\n### Risk 4: Low Adoption\n\n**Likelihood:** Low-Medium  \n**Impact:** High (wasted investment)\n\n**Mitigations:**\n- Clear value prop in UX\n- Prominent but not intrusive entry point\n- Success stories and templates\n- Future: Suggested research based on conversation\n\n---\n\n## Open Questions\n\n### Product Questions\n\n1. **Should research be a premium feature?**\n   - Costs ~$0.10-0.50 per research in API calls\n   - Could gate behind Pro tier or credit system\n\n2. **What's the document retention policy?**\n   - Keep all research forever?\n   - Archive after N days if not added to RAG?\n\n3. **Should research be shareable?**\n   - Export as PDF/Markdown?\n   - Share link to document?\n   - Collaborative Grove implications?\n\n### Technical Questions\n\n1. **Which vector store for RAG?**\n   - Pinecone, Weaviate, pgvector, local?\n   - Depends on broader Grove RAG architecture\n\n2. **How to handle research that contradicts existing Sprouts?**\n   - Surface conflict to Observer?\n   - Automatic confidence adjustment?\n\n3. **Background processing for v1.1+?**\n   - Job queue architecture (Redis, SQS)?\n   - Notification system?\n\n---\n\n## Appendix A: Research Prompt Iterations\n\n### Prompt v0.1 (Starting Point)\n\n[Include the system prompt from Technical Architecture section]\n\n### Prompt Tuning Process\n\n1. Run 10 sample queries across domains\n2. Evaluate: citation accuracy, position clarity, analysis depth\n3. Adjust prompt based on failure modes\n4. Repeat until quality bar met\n\n### Sample Queries for Testing\n\n- \"What are the pricing models for distributed inference networks?\"\n- \"How does the EU AI Act classify edge computing applications?\"\n- \"What is the current state of homomorphic encryption for ML inference?\"\n- \"Compare WebGPU vs WebNN for in-browser ML\"\n- \"What are the governance models for open source AI projects?\"\n\n---\n\n## Appendix B: Competitive Research\n\n### Perplexity Pro\n\n**Strengths:**\n- Excellent source quality\n- Fast results\n- Good citation formatting\n\n**Weaknesses:**\n- No persistent knowledge base\n- No connection to prior queries\n- Results don't compound\n\n### ChatGPT with Browsing\n\n**Strengths:**\n- Conversational follow-up\n- Good synthesis\n\n**Weaknesses:**\n- Citation quality variable\n- No structured output\n- No RAG integration\n\n### Elicit\n\n**Strengths:**\n- Academic source focus\n- Structured extraction\n- Concept mapping\n\n**Weaknesses:**\n- Narrow to academic use case\n- No general web search\n- Separate from conversation\n\n### Grove Research Positioning\n\n\"Research that grows your exploration capacity, not just answers your question.\"\n\nUnique value:\n- Research compounds (enters RAG)\n- Structured output (position + analysis + citations)\n- Future: Integrates with existing knowledge\n- Future: Suggests exploration paths\n\n---\n\n## Appendix C: Future Vision Sketches\n\n### Collaborative Research\n\nMultiple Observers researching same topic, Sprouts merge with attribution:\n\n```\nğŸŒ± \"Distributed inference pricing converges on three models...\"\n   Sources: Jim's research, Sarah's research\n   Confidence: 0.95 (corroborated)\n```\n\n### Research Campaigns\n\nMulti-query research with synthesis:\n\n```\nObserver: /research-campaign \"Competitive landscape for distributed AI\"\n\nGrove: I'll investigate this as a 5-part research campaign:\n       1. Major players and positioning\n       2. Technical architectures compared\n       3. Pricing and business models\n       4. Regulatory considerations\n       5. Market predictions\n       \n       Estimated time: 15-20 minutes\n       \n       [Start Campaign] [Customize Topics]\n```\n\n### Knowledge Gap Detection\n\nGrove identifies what Observer doesn't know:\n\n```\nGrove: Based on your Grove, you have strong coverage of \n       technical architecture but limited knowledge of:\n       - Regulatory landscape (2 Sprouts)\n       - Competitive pricing (0 Sprouts)\n       \n       [Research Gaps] [Ignore]\n```\n\n---\n\n*Document version 1.0. For review and iteration.*"
  }
]